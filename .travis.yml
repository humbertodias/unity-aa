language: objective-c
osx_image: xcode9.3
rvm:
- 2.5.1

before_install:
- chmod a+x ./Scripts/install.sh
- chmod a+x ./Scripts/build.sh

install:
- "./Scripts/install.sh"
script:
- "./Scripts/build.sh"

jdk: oraclejdk8
env:
 global:
    - JAVA_HOME=/Library/Java/JavaVirtualMachines/jdk1.8.0_112.jdk/Contents/Home
    - ANDROID_HOME=/usr/local/share/android-sdk

# android:
#   components:
#     - tools
#     - platform-tools

#     # The BuildTools version used by your project
#     - build-tools-26.0.2

#     # The SDK version used to compile your project
#     - android-26

deploy:
- provider: pages
  local-dir: Build/webgl/unity-aa/
  github-token: $GITHUB_TOKEN
  keep-history: false
  skip_cleanup: true
  on:
    repo: humbertodias/unity-aa
- provider: releases
  file_glob: true
  file: 
    - Build/**/*.zip
    - unity.log
  api_key: $GITHUB_TOKEN
  skip_cleanup: true
  name: $TRAVIS_BRANCH $(date +'%Y.%m.%d %H:%M')
  on:
    repo: humbertodias/unity-aa
